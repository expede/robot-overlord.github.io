// Generated by purs version 0.11.5
"use strict";
var App_Routes = require("../App.Routes");
var App_State = require("../App.State");
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Monad_Aff = require("../Control.Monad.Aff");
var Control_Monad_Eff = require("../Control.Monad.Eff");
var Control_Monad_Eff_Class = require("../Control.Monad.Eff.Class");
var Control_Semigroupoid = require("../Control.Semigroupoid");
var DOM = require("../DOM");
var DOM_Event_Event = require("../DOM.Event.Event");
var DOM_HTML = require("../DOM.HTML");
var DOM_HTML_History = require("../DOM.HTML.History");
var DOM_HTML_Types = require("../DOM.HTML.Types");
var DOM_HTML_Window = require("../DOM.HTML.Window");
var Data_Foreign = require("../Data.Foreign");
var Data_Function = require("../Data.Function");
var Data_Maybe = require("../Data.Maybe");
var Network_HTTP_Affjax = require("../Network.HTTP.Affjax");
var Prelude = require("../Prelude");
var Pux = require("../Pux");
var Pux_DOM_Events = require("../Pux.DOM.Events");
var PageView = (function () {
    function PageView(value0) {
        this.value0 = value0;
    };
    PageView.create = function (value0) {
        return new PageView(value0);
    };
    return PageView;
})();
var Navigate = (function () {
    function Navigate(value0, value1) {
        this.value0 = value0;
        this.value1 = value1;
    };
    Navigate.create = function (value0) {
        return function (value1) {
            return new Navigate(value0, value1);
        };
    };
    return Navigate;
})();
var foldp = function (v) {
    return function (v1) {
        if (v instanceof PageView) {
            return Pux.noEffects(App_State.State.create((function () {
                var $6 = {};
                for (var $7 in v1.value0) {
                    if ({}.hasOwnProperty.call(v1.value0, $7)) {
                        $6[$7] = v1["value0"][$7];
                    };
                };
                $6.route = v.value0;
                return $6;
            })()));
        };
        if (v instanceof Navigate) {
            return {
                state: v1, 
                effects: [ Control_Monad_Eff_Class.liftEff(Control_Monad_Aff.monadEffAff)(function __do() {
                    DOM_Event_Event.preventDefault(v.value1)();
                    var v2 = Control_Bind.bindFlipped(Control_Monad_Eff.bindEff)(DOM_HTML_Window.history)(DOM_HTML.window)();
                    DOM_HTML_History.pushState(Data_Foreign.toForeign({}))("")(v.value0)(v2)();
                    return Data_Maybe.Just.create(PageView.create(App_Routes.match(v.value0)));
                }) ]
            };
        };
        throw new Error("Failed pattern match at App.Events line 50, column 1 - line 51, column 51: " + [ v.constructor.name, v1.constructor.name ]);
    };
};
module.exports = {
    PageView: PageView, 
    Navigate: Navigate, 
    foldp: foldp
};
