// Generated by purs version 0.11.5
"use strict";
var App_Events = require("../App.Events");
var App_Routes = require("../App.Routes");
var App_State = require("../App.State");
var App_View_Layout = require("../App.View.Layout");
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Monad_Eff = require("../Control.Monad.Eff");
var DOM = require("../DOM");
var DOM_HTML = require("../DOM.HTML");
var DOM_HTML_Location = require("../DOM.HTML.Location");
var DOM_HTML_Types = require("../DOM.HTML.Types");
var DOM_HTML_Window = require("../DOM.HTML.Window");
var Data_Semigroup = require("../Data.Semigroup");
var Prelude = require("../Prelude");
var Pux = require("../Pux");
var Pux_DOM_Events = require("../Pux.DOM.Events");
var Pux_DOM_History = require("../Pux.DOM.History");
var Pux_Renderer_React = require("../Pux.Renderer.React");
var Signal = require("../Signal");
var main = function (url) {
    return function (state) {
        return function __do() {
            var v = DOM_HTML.window();
            var v1 = Pux_DOM_History.sampleURL(v)();
            var v2 = Control_Bind.bindFlipped(Control_Monad_Eff.bindEff)(DOM_HTML_Location.hash)(DOM_HTML_Window.location(v))();
            var routeSignal = Signal.flippedMap(Signal.functorSignal)(v1)(function (r) {
                return new App_Events.PageView(App_Routes.match(r + v2));
            });
            var v3 = Pux.start({
                initialState: state, 
                view: App_View_Layout.view, 
                foldp: App_Events.foldp, 
                inputs: [ routeSignal ]
            })();
            Pux_Renderer_React.renderToDOM("#app")(v3.markup)(v3.input)();
            return v3;
        };
    };
};
var initialState = function (path) {
    return App_State.init(path);
};
module.exports = {
    initialState: initialState, 
    main: main
};
